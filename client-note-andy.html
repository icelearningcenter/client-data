<div class="client-record-container">
  <div class="client-header">
    <div class="client-logo">
      <img src="/s/Client-Record-Logo.png" alt="ICE Learning Center Logo">
    </div>
    <div class="client-search-wrapper">
      <div class="client-search">
        <input type="text" id="client-search-input" class="client-search-input" placeholder="Find a Client Record..." autocomplete="off">
        <button id="client-search-button" class="client-search-button">Go</button>
      </div>
      <div class="autocomplete-results" id="autocomplete-results"></div>
    </div>
  </div>
  <div class="client-info">
    <h1>Andy</h1>
    <h2>Client ID 049</h2>
  </div>
<div class="info-table-wrapper">
  <dl class="info-list">
    
    <div>
      <dt>Name</dt>
      <dd>Andy</dd>
    </div>
    
    <div>
      <dt>Primary Diagnosis</dt>
      <dd>Progressive supranuclear palsy</dd>
    </div>
    
    <div>
      <dt>Insurance</dt>
      <dd>Medicare</dd>
    </div>
    
    <div>
      <dt>Referring Physician</dt>
      <dd>J. Wu, MD</dd>
    </div>
    
    <div>
      <dt>Age</dt>
      <dd>70</dd>
    </div>
    
    <div>
      <dt>Gender Identity</dt>
      <dd>Male</dd>
    </div>
    
    <div>
      <dt>Pronouns</dt>
      <dd>He/him/his</dd>
    </div>
    
    <div>
      <dt>Race/Ethnicity</dt>
      <dd>White</dd>
    </div>
    
  </dl>
</div>
  <div class="tab-container">
    <div class="tab-nav">
      
      <button class="tab-nav-button active" data-target="tab-1">Medical History</button>
      
      <button class="tab-nav-button " data-target="tab-2">Social History</button>
      
      <button class="tab-nav-button " data-target="tab-3">MD Orders</button>
      
      <button class="tab-nav-button " data-target="tab-4">Medications</button>
      
      <button class="tab-nav-button " data-target="tab-5">Test Results</button>
      
    </div>
    <div class="tab-content">
      
      <div id="tab-1" class="tab-panel active">
        <p>70yo WM with progressive supranuclear palsy, initially diagnosed 5 years ago after developing recurrent posterior losses of balance and reduced volume of speech. Currently receives outpatient OT, PT, and SLP services. Also has a history of type 2 diabetes, diabetic coma, kidney disease, dry eye disease, dry mouth, glaucoma secondary to diabetes, and Charcot foot with foot reconstruction surgery.</p>
      </div>
      
      <div id="tab-2" class="tab-panel ">
        <p><strong>Marital status:</strong>Married 49 years</p>
<p><strong>Primary language:</strong>English</p>
<p><strong>Current level of function:</strong>Requires partial assist for ADLs. Ambulates with rollator. Requires substantial assist for IADLs. Does not drive. Wife reports client can be overconfident at times and requires supervision for safety.</p>
<p><strong>Employment/work/school:</strong>College education (law degree). Managed family dairy farm until elected youngest member of state legislature. Worked as a radio talk show host after public service, but is now retired.</p>
<p><strong>Play/leisure/interests:</strong>Enjoys participating in adaptive sports program activities, including orchestra (clarinet and percussion), bowling, fishing, golfing, and archery. Still keeps up-to-date on politics through watching and reading the news every morning. Continues to be involved in advocacy, especially related to agricultural policies, but reports typing has become difficult.</p>
<p><strong>Environmental factors:</strong>Lives with wife in a two-story house. 3 STE with custom ramp, no handrails. Bedroom, bathroom, living room, dining area, and kitchen on first floor. Zero-entry shower with shower chair, handheld shower head, grab bars, and bedside commode over toilet. Mainly uses rollator but also owns a FWW and U-Step walker. Occasionally uses a standard wheelchair in the community. His adult son lives locally and provides assistance intermittently.</p>
      </div>
      
      <div id="tab-3" class="tab-panel ">
        <p>None</p>
      </div>
      
      <div id="tab-4" class="tab-panel ">
        <p>Levadopa<br>Lyumjev<br>Lantus<br>Tovistatin<br>Pilocarpine<br>Supplements (Vitamin D, B12, Zinc, Probiotics, Berberine, Magnesium)</p>
      </div>
      
      <div id="tab-5" class="tab-panel ">
        <p>MRI: Marked atrophy in midbrain ("hummingbird sign") and mild cortical thinning in frontal lobe, highly suggestive of Progressive Supranuclear Palsy</p>
      </div>
      
    </div>
  </div>
  <div style="padding: 0 20px 20px 20px; font-style: italic; color: #777;">
    Disclaimer: Although the individuals in ICE videos are real patients, the exact history has been altered to protect their identities.
  </div>
</div>

<script>
  // --- CLIENT DATA ---
  // Loaded externally from client-list.js via Squarespace Code Injection
  function initClientFeatures() {
    if (typeof clientData === "undefined") {
      console.warn("Waiting for client-list.js to load...");
      return setTimeout(initClientFeatures, 200);
    }

    // --- 1. Define Elements ---
    const tabButtons = document.querySelectorAll(".tab-nav-button");
    const tabPanels = document.querySelectorAll(".tab-panel");
    const searchInput = document.getElementById("client-search-input");
    const searchButton = document.getElementById("client-search-button");
    const resultsWrapper = document.getElementById("autocomplete-results");

    // --- 2. Setup Tab Logic ---
    if (tabButtons.length > 0 && tabPanels.length > 0) {
      tabButtons.forEach(button => {
        button.addEventListener("click", () => {
          tabButtons.forEach(btn => btn.classList.remove("active"));
          tabPanels.forEach(panel => panel.classList.remove("active"));

          button.classList.add("active");
          const targetPanel = document.getElementById(button.getAttribute("data-target"));
          if (targetPanel) {
            targetPanel.classList.add("active");
          }
        });
      });
    }

    // --- 3. Setup Autocomplete Search Logic ---
    if (searchInput && searchButton && resultsWrapper) {
      // Function to perform the redirect
      function goToClient(slug) {
        if (!slug) return;
        const baseUrl = "https://www.icelearningcenter.com/";
        window.location.href = baseUrl + slug;
      }

      // Function to handle the search input
      function handleSearchInput() {
        const inputVal = searchInput.value.toLowerCase();
        resultsWrapper.innerHTML = "";

        if (!inputVal) {
          resultsWrapper.style.display = "none";
          return;
        }

        const matches = clientData.filter(client =>
          client.name.toLowerCase().includes(inputVal)
        );

        if (matches.length > 0) {
          resultsWrapper.style.display = "block";
          matches.forEach(match => {
            const item = document.createElement("div");
            item.className = "autocomplete-item";
            item.textContent = match.name;
            item.addEventListener("click", function () {
              searchInput.value = match.name;
              resultsWrapper.style.display = "none";
              goToClient(match.slug);
            });
            resultsWrapper.appendChild(item);
          });
        } else {
          resultsWrapper.style.display = "none";
        }
      }

      // Listen for typing in the search box
      searchInput.addEventListener("input", handleSearchInput);

      // Handle the "Go" button click
      searchButton.addEventListener("click", function () {
        const inputVal = searchInput.value.toLowerCase();
        const exactMatch = clientData.find(client => client.name.toLowerCase() === inputVal);

        if (exactMatch) {
          goToClient(exactMatch.slug);
        } else if (resultsWrapper.children.length > 0) {
          // If no exact match but there are results, go to the first result
          resultsWrapper.children[0].click();
        }
      });

      // Handle pressing "Enter" in the search box
      searchInput.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
          event.preventDefault();
          searchButton.click();
        }
      });

      // Close dropdown if user clicks outside of it
      document.addEventListener("click", function (e) {
        const wrapper = e.target.closest(".client-search-wrapper");
        if (!wrapper) {
          resultsWrapper.style.display = "none";
        }
      });
    }
  }

  // Run once DOM is ready
  document.addEventListener("DOMContentLoaded", initClientFeatures);
</script>