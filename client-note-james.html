<div class="client-record-container">
  <div class="client-header">
    <div class="client-logo">
      <img src="/s/Client-Record-Logo.png" alt="ICE Learning Center Logo">
    </div>
    <div class="client-search-wrapper">
      <div class="client-search">
        <input type="text" id="client-search-input" class="client-search-input" placeholder="Find a Client Record..." autocomplete="off">
        <button id="client-search-button" class="client-search-button">Go</button>
      </div>
      <div class="autocomplete-results" id="autocomplete-results"></div>
    </div>
  </div>
  <div class="client-info">
    <h1>James</h1>
    <h2>Client ID 039</h2>
  </div>
<div class="info-table-wrapper">
  <dl class="info-list">
    
    <div>
      <dt>Name</dt>
      <dd>James</dd>
    </div>
    
    <div>
      <dt>Primary Diagnosis</dt>
      <dd>ADHD</dd>
    </div>
    
    <div>
      <dt>Insurance</dt>
      <dd>Cigna</dd>
    </div>
    
    <div>
      <dt>Referring Physician</dt>
      <dd></dd>
    </div>
    
    <div>
      <dt>Age</dt>
      <dd>7</dd>
    </div>
    
    <div>
      <dt>Gender Identity</dt>
      <dd>Male</dd>
    </div>
    
    <div>
      <dt>Pronouns</dt>
      <dd>He/him/his</dd>
    </div>
    
    <div>
      <dt>Race/Ethnicity</dt>
      <dd>White</dd>
    </div>
    
  </dl>
</div>
  <div class="tab-container">
    <div class="tab-nav">
      
      <button class="tab-nav-button active" data-target="tab-1">Medical History</button>
      
      <button class="tab-nav-button " data-target="tab-2">Social History</button>
      
      <button class="tab-nav-button " data-target="tab-3">Medications</button>
      
    </div>
    <div class="tab-content">
      
      <div id="tab-1" class="tab-panel active">
        
<p><strong>Current Medical History:</strong> <br/>James has a diagnosis of ADHD.</p>
<p><strong>Past medical/surgical history:</strong> <br/>James had one minor surgery at 3 years of age.</p>
<p><strong>Birth history:</strong> <br/>James was born at 40 weeks, 6 days as a result of an emergency c-section due to fetal distress. He weighed 7lbs 9oz</p>

      </div>
      
      <div id="tab-2" class="tab-panel ">
        
<p><strong>Parental Concerns:</strong> James lives at home with mom, dad, and brother who is 3.5 months younger than him. He shares a bedroom with his brother. James is an inquisitive, athletic, and smart boy who is always on the go. He frequently complains of being bored during down time. James frequently has emotional outbursts when he is frustrated or upset, especially if he is also hungry.</p>
<p><strong>School:</strong> James is in third grade and has a 504 plan for accommodations related to his diagnosis of ADHD (e.g., preferential seating, recheck for understanding, use of fidgets). He is performing above grade level in all academic areas and is on the A-Honor Roll. James is working toward listening and following directions consistently within the classroom setting.</p>
<p><strong>Milestones:</strong><br/>Rolling: supine to prone at 2 weeks; prone to supine at 4 weeks<br/>Crawling: 4 months Sitting: 5 months<br/>Prone to Sitting: 6 months<br/>Standing: 7 months<br/>Walking: 10 months<br/>Potty trained: 14 months<br/>Riding a bike: 2.5 years</p>
<p><strong>Interests:</strong> James is an athlete and loves being outside and playing sports, including soccer, basketball, tennis, and baseball. He enjoys reading chapter books, playing board games, doing science experiments, and playing with friends.</p>

      </div>
      
      <div id="tab-3" class="tab-panel ">
        
<p>Ritalin XR 15mg<br/>Intuniv 2mg<br/>Melatonin 10mg<br/>Daily multivitamin</p>

      </div>
      
    </div>
  </div>
  <div style="padding: 0 20px 20px 20px; font-style: italic; color: #777;">
    Disclaimer: Although the individuals in ICE videos are real patients, the exact history has been altered to protect their identities.
  </div>
</div>

<script>
  // --- CLIENT DATA ---
  // Loaded externally from client-list.js via Squarespace Code Injection
  function initClientFeatures() {
    if (typeof clientData === "undefined") {
      console.warn("Waiting for client-list.js to load...");
      return setTimeout(initClientFeatures, 200);
    }

    // --- 1. Define Elements ---
    const tabButtons = document.querySelectorAll(".tab-nav-button");
    const tabPanels = document.querySelectorAll(".tab-panel");
    const searchInput = document.getElementById("client-search-input");
    const searchButton = document.getElementById("client-search-button");
    const resultsWrapper = document.getElementById("autocomplete-results");

    // --- 2. Setup Tab Logic ---
    if (tabButtons.length > 0 && tabPanels.length > 0) {
      tabButtons.forEach(button => {
        button.addEventListener("click", () => {
          tabButtons.forEach(btn => btn.classList.remove("active"));
          tabPanels.forEach(panel => panel.classList.remove("active"));

          button.classList.add("active");
          const targetPanel = document.getElementById(button.getAttribute("data-target"));
          if (targetPanel) {
            targetPanel.classList.add("active");
          }
        });
      });
    }

    // --- 3. Setup Autocomplete Search Logic ---
    if (searchInput && searchButton && resultsWrapper) {
      // Function to perform the redirect
      function goToClient(slug) {
        if (!slug) return;
        const baseUrl = "https://www.icelearningcenter.com/";
        window.location.href = baseUrl + slug;
      }

      // Function to handle the search input
      function handleSearchInput() {
        const inputVal = searchInput.value.toLowerCase();
        resultsWrapper.innerHTML = "";

        if (!inputVal) {
          resultsWrapper.style.display = "none";
          return;
        }

        const matches = clientData.filter(client =>
          client.name.toLowerCase().includes(inputVal)
        );

        if (matches.length > 0) {
          resultsWrapper.style.display = "block";
          matches.forEach(match => {
            const item = document.createElement("div");
            item.className = "autocomplete-item";
            item.textContent = match.name;
            item.addEventListener("click", function () {
              searchInput.value = match.name;
              resultsWrapper.style.display = "none";
              goToClient(match.slug);
            });
            resultsWrapper.appendChild(item);
          });
        } else {
          resultsWrapper.style.display = "none";
        }
      }

      // Listen for typing in the search box
      searchInput.addEventListener("input", handleSearchInput);

      // Handle the "Go" button click
      searchButton.addEventListener("click", function () {
        const inputVal = searchInput.value.toLowerCase();
        const exactMatch = clientData.find(client => client.name.toLowerCase() === inputVal);

        if (exactMatch) {
          goToClient(exactMatch.slug);
        } else if (resultsWrapper.children.length > 0) {
          // If no exact match but there are results, go to the first result
          resultsWrapper.children[0].click();
        }
      });

      // Handle pressing "Enter" in the search box
      searchInput.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
          event.preventDefault();
          searchButton.click();
        }
      });

      // Close dropdown if user clicks outside of it
      document.addEventListener("click", function (e) {
        const wrapper = e.target.closest(".client-search-wrapper");
        if (!wrapper) {
          resultsWrapper.style.display = "none";
        }
      });
    }
  }

  // Run once DOM is ready
  document.addEventListener("DOMContentLoaded", initClientFeatures);
</script>